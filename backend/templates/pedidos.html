{% extends 'layout.html' %}
{% block title %}Pedidos{% endblock %}

{% block content %}

<h2>Pedidos</h2>

<table border="1" id="tabelaPedidos">
    <thead>
        <tr>
            <th>Cliente</th>
            <th>Data</th>
            <th>Valor Total</th>
            <th>Itens</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<br><hr><br>

<h2>Cadastrar Pedido</h2>
<form id="formPedido">
    <label>ID do Cliente:</label>
    <input type="number" id="cliente_id" required><br><br>

    <div id="itensPedido">
        <h2>Itens</h2>
        <div class="item">
            <input type="text" placeholder="Descrição" class="descrição_item" required>
            <input type="number" placeholder="Quantidade" class="quantidade" required>
            <input type="number" placeholder="Preço Unitario" class="preco_unitario" required><br><br>
        </div>
    </div>
    <button type="button" onclick="adicionarItem()">Adicionar Item</button><br><br>
    <button type="submit">Cadastrar Pedido</button>
</form>

<script src="{{url_for('static', filename='js/pedidos.js') }}" defer></script>

<!-- Modal de Edição de Pedido -->
<div class="modal fade" id="modalEditarPedido" tabindex="-1" aria-labelledby="modalEditarPedidoLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalEditarPedidoLabel">Editar Pedido</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editPedidoId">
          <div id="edit-itens-container" class="mb-3"></div>
          <button type="button" class="btn btn-secondary" onclick="adicionarItemEdit()">Adicionar Item</button>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-primary" onclick="salvarEdicaoPedido()">Salvar Alterações</button>
        </div>
      </div>
    </div>
  </div>
  

{% endblock %}